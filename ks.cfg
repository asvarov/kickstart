#Generated by Kickstart Configurator
#platform=AMD64 or Intel EM64T

#System language
lang uk_UA
#Language modules to install
langsupport ru_RU --default=uk_UA
#System keyboard
keyboard us
#System mouse
mouse
#System timezone
timezone Europe/Kiev
#Root password
rootpw --disabled
#Initial user
user admin --fullname "Admin" --iscrypted --password $1$5XfjPH7q$YHL1K2C2MSFoUj7BgYouO0
#Reboot after installation
reboot
#Use text mode install
text
#Install OS instead of upgrade
install
#Use CDROM installation media
cdrom
#System bootloader configuration
bootloader --location=mbr 
#Clear the Master Boot Record
zerombr yes
#Partition clearing information
clearpart --all --initlabel 
#Disk partitioning information
part /boot --fstype ext4 --size 256 --asprimary 
part swap --size 1024 
part / --fstype ext4 --size 1 --grow --maxsize 1 --asprimary 
#System authorization infomation
auth  --useshadow  --enablemd5 
#Network information
network --bootproto=dhcp --device=eth0
#Firewall configuration
firewall --disabled 
#X Window System configuration information
xconfig --depth=32 --resolution=1024x768 --defaultdesktop=GNOME --startxonboot
#Run the Setup Agent on first boot
firstboot --reconfig
#Package install information
%packages
@ ubuntu-desktop
ssh
python
python3
mc
gconf-editor
dconfeditor
net-tools
ntpdate


%post

# Fix locale
echo 'LANG="en_US.UTF-8"' > /etc/default/locale
echo 'LANGUAGE="en_US:en"' >> /etc/default/locale
echo 'LC_ALL="en_US.UTF-8"' >> /etc/default/locale

# Add post installation script to /usr/local/bin/ directory
mkdir /mnt/cdrom
mount /dev/cdrom /mnt/cdrom
cp /mnt/cdrom/post.sh /usr/local/bin/
chown ernestas:ernestas /usr/local/bin/post.sh
chmod 744 /usr/local/bin/post.sh

#apt-get update
#cp -R resolv.conf /etc/resolv.conf
#wget https://github.com/BeyondTrust/pbis-open/releases/download/8.8.0/pbis-open-8.8.0.506.linux.x86_64.deb.sh
#chmod +x pbis-open-8.8.0.506.linux.x86_64.deb.sh
#./pbis-open-8.8.0.506.linux.x86_64.deb.sh
#/opt/pbis/bin/domainjoin-cli join TEST.LAB administrator
#mkdir -p /etc/skel/.config/
#cp -R dconf /etc/skel/.config/
#mkdir -p /etc/skel/.ssh/
#cp -R authorized_key /etc/skel/.ssh/

# Clean
apt-get -f -y install
apt-get -y autoremove
apt-get clean
